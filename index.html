<!DOCTYPE html>
<html lang="fr">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sen Money</title>
    <link rel="stylesheet" href="style.css">
    <script >
        




var tabNumeros = ["777536462","776362737", "771301845", "761472273","784448668"];
var tabSoldes = [200000, 300000, 400000, 500000, 600000];
var tabCodes = ["0000","0101","0202","0303","0404"];
var num;
var numCourant;

 function menu() {

    var text = document.getElementById("num").value;
    var stringMenu = ""+
   "---------Bienvenue SENMONEY---------\n"+
    "-------------"+text+"-------------"+ 
    " \n Taper le Numéro du Service Choisi\n"+
    "1 : Solde de mon compte\n"+
    "2 : Transfert d'arent\n"+
    "3 : Paiement facture\n"+
    "4 : Option";
    
    var rep = window.prompt(stringMenu);
    return rep;

 }

 function afficheSolde(num) {
    var indice = tabNumeros.indexOf(num);
    if(indice != -1){
        var code = window.prompt("Donnez votre code secret");
        if(code==tabCodes[indice]){
            alert("Votre solde est de : "+tabSoldes[indice]+" F CFA" ) +nextStep();
        }
    else{
        alert("Le code est incorect!");
    }
    }
   
 }
  function main(){
      var rep = menu();
      var numCourant = document.getElementById('num').value;
      switch(rep){
        case "1":
        afficheSolde(numCourant);
        break;

        case "2":
        numTrans = document.getElementById('num').value;
        transfert(numTrans);
        break;
      }
    }
    function nextStep(){
      var returnMenu = window.confirm("Voulez vous retourner au menu ?")
      if(returnMenu == true){
        return main();
      }
      else{
        alert("A la prochaine")
      }
    }     
    


function transfert(numDest){
            var indice = tabNumeros.indexOf(numDest);
            if (indice != -1) 
            {
                var numero = window.prompt("Veuillez saisir le numéro de téléphone du destinataire:");
                if(numero !=-1){
                for (var i=0; i<tabNumeros.length; i++)
                {
                    if (numero == tabNumeros[i]) 
                    {
                        var montant = window.prompt("Veuillez saisir le montant du transfert:");
                        var z = parseInt(montant);
                        var code = window.prompt("Veuillez saisir votre code secret:");
                         if (code == tabCodes[indice])
                        {
                            if (z < tabSoldes[indice]) 
                            {
                                tabSoldes[indice] -=z; 
                                tabSoldes[i] = tabSoldes[i] + z;
              
                                alert("Votre  solde  est maintenant de "+tabSoldes[indice]+ " F CFA");
                                 
                            }
                            else 
                            {
                                alert ("Votre solde est insuffisant");
                            }
                        }
                    }
               }
            }
            }
        }
  


    </script>
</head>

<body>
    <div>
        <h1>Sen Money</h1>

        <form name="form">
            <select name="" id="num">
                <script>
                    var txt = "";
                    for(let i=0;i<tabNumeros.length;i++){
                        txt += "<option>"+tabNumeros[i]+"</option>";
                    }
                    document.write(txt);
                </script>
            </select>
        </form>
        <br>
        <button onclick="main()">#221#</button>
    </div>
</body>

</html>